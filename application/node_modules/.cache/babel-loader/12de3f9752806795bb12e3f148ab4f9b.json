{"ast":null,"code":"import axios from \"axios\";\nimport { RESPONSE_ACTION, RESET_ACTION, PENDING_ACTION } from './constants';\nimport { clearToken } from \"../../features/Auth/redux/actions\";\nexport const CODE_BAD_REQUEST = 400;\nexport const CODE_NOT_FOUND = 404;\nexport const CODE_SERVER_ERROR = 500;\nexport const CODE_SUCCESS = 200;\nexport const CODE_UNAUTHENTICATED = 401;\nexport const MESSAGE_SERVER_ERROR = \"Server error\";\nexport function reset() {\n  return dispatch => {\n    dispatch(resetAction());\n  };\n}\nexport function resetAction() {\n  return {\n    type: RESET_ACTION,\n    payload: null\n  };\n}\nexport function pendingAction() {\n  return {\n    type: PENDING_ACTION,\n    payload: null\n  };\n}\nexport function get(dispatch) {\n  let url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  let data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  let config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  let callback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n  dispatch(pendingAction());\n  return axios.get(url, config).then(response => {\n    resolve(dispatch, response, callback);\n  }).catch(reason => {\n    reject(dispatch, reason, callback);\n  });\n}\nexport function post(dispatch) {\n  let url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  let data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  let config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  let callback = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n  dispatch(pendingAction());\n  return axios.post(url, data, config).then(response => {\n    resolve(dispatch, response, callback);\n  }).catch(reason => {\n    reject(dispatch, reason, callback);\n  });\n}\nexport function resolve(dispatch, response, callback) {\n  dispatch(responseAction(response));\n\n  if (typeof callback === \"function\") {\n    dispatch(callback(dispatch, response.data));\n  }\n}\nexport function reject(dispatch, reason, callback) {\n  const data = {\n    data: null,\n    code: null,\n    message: MESSAGE_SERVER_ERROR,\n    errors: {},\n    status: CODE_SERVER_ERROR,\n    statusText: MESSAGE_SERVER_ERROR\n  };\n  const response = {\n    data: { ...data\n    },\n    ...reason.response\n  };\n  dispatch(responseAction(response)); // Need callback function\n\n  if (typeof callback === \"function\") {\n    dispatch(callback(dispatch, response.data));\n  } // For case auth\n\n\n  if (response.status === CODE_UNAUTHENTICATED || response.code === CODE_UNAUTHENTICATED) {\n    dispatch(clearToken());\n  }\n}\n\nfunction responseAction(response) {\n  const data = response.data;\n  const payload = {\n    data: data.data,\n    code: data.code,\n    message: data.message,\n    errors: data.errors,\n    status: response.status !== undefined ? response.status : CODE_SERVER_ERROR,\n    statusText: response.statusText !== undefined ? response.statusText : MESSAGE_SERVER_ERROR\n  };\n  return {\n    type: RESPONSE_ACTION,\n    payload: payload\n  };\n}","map":{"version":3,"sources":["/Users/trantuan/LaundryShop/laundry-shop-admin/application/src/common/crud/actions.js"],"names":["axios","RESPONSE_ACTION","RESET_ACTION","PENDING_ACTION","clearToken","CODE_BAD_REQUEST","CODE_NOT_FOUND","CODE_SERVER_ERROR","CODE_SUCCESS","CODE_UNAUTHENTICATED","MESSAGE_SERVER_ERROR","reset","dispatch","resetAction","type","payload","pendingAction","get","url","data","config","callback","then","response","resolve","catch","reason","reject","post","responseAction","code","message","errors","status","statusText","undefined"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport {RESPONSE_ACTION, RESET_ACTION, PENDING_ACTION} from './constants'\nimport {clearToken} from \"../../features/Auth/redux/actions\";\n\nexport const CODE_BAD_REQUEST     = 400;\nexport const CODE_NOT_FOUND       = 404;\nexport const CODE_SERVER_ERROR    = 500;\nexport const CODE_SUCCESS         = 200;\nexport const CODE_UNAUTHENTICATED = 401;\n\nexport const MESSAGE_SERVER_ERROR = \"Server error\";\n\nexport function reset() {\n    return dispatch => {\n        dispatch(resetAction())\n    }\n}\n\nexport function resetAction() {\n    return {\n        type   : RESET_ACTION,\n        payload: null\n    };\n}\n\nexport function pendingAction() {\n    return {\n        type   : PENDING_ACTION,\n        payload: null\n    };\n}\n\nexport function get(dispatch, url = '', data = {}, config = {}, callback = null) {\n    dispatch(pendingAction())\n    return axios.get(url, config).then(response => {\n        resolve(dispatch, response, callback)\n    }).catch(reason => {\n        reject(dispatch, reason, callback)\n    });\n}\n\nexport function post(dispatch, url = '', data = {}, config = {}, callback = null) {\n    dispatch(pendingAction())\n    return axios.post(url, data, config).then(response => {\n        resolve(dispatch, response, callback)\n    }).catch(reason => {\n        reject(dispatch, reason, callback)\n    });\n}\n\nexport function resolve(dispatch, response, callback) {\n    dispatch(responseAction(response))\n    if (typeof callback === \"function\") {\n        dispatch(callback(dispatch, response.data))\n    }\n}\n\nexport function reject(dispatch, reason, callback) {\n\n    const data     = {\n        data      : null,\n        code      : null,\n        message   : MESSAGE_SERVER_ERROR,\n        errors    : {},\n        status    : CODE_SERVER_ERROR,\n        statusText: MESSAGE_SERVER_ERROR,\n    };\n    const response = {\n        data: {\n            ...data\n        },\n        ...reason.response\n    }\n\n    dispatch(responseAction(response))\n\n    // Need callback function\n    if (typeof callback === \"function\") {\n        dispatch(callback(dispatch, response.data))\n    }\n\n    // For case auth\n    if (response.status === CODE_UNAUTHENTICATED || response.code === CODE_UNAUTHENTICATED) {\n        dispatch(clearToken())\n    }\n}\n\nfunction responseAction(response) {\n    const data    = response.data\n    const payload = {\n        data      : data.data,\n        code      : data.code,\n        message   : data.message,\n        errors    : data.errors,\n        status    : response.status !== undefined ? response.status : CODE_SERVER_ERROR,\n        statusText: response.statusText !== undefined ? response.statusText : MESSAGE_SERVER_ERROR,\n    }\n\n    return {\n        type   : RESPONSE_ACTION,\n        payload: payload\n    };\n}"]},"metadata":{},"sourceType":"module"}