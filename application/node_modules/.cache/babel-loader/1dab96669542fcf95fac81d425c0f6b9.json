{"ast":null,"code":"import initialState from \"./initialState\";\nimport { SET_TOKEN_ACTION, CLEAR_TOKEN_ACTION, ARG_TOKEN } from \"./constants\";\nexport function reducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  const defaultState = loadStateFromLocal();\n\n  switch (action.type) {\n    case SET_TOKEN_ACTION:\n    case CLEAR_TOKEN_ACTION:\n    default:\n      return { ...state,\n        ...defaultState\n      };\n  }\n}\n\nfunction loadStateFromLocal() {\n  let stateFromLocal;\n\n  try {\n    let payload = JSON.parse(localStorage.getItem(ARG_TOKEN));\n    stateFromLocal = {\n      id: payload.id,\n      username: payload.username,\n      full_name: payload.full_name,\n      token: payload.token,\n      role: payload.role,\n      message: null\n    };\n  } catch (e) {\n    localStorage.removeItem(ARG_TOKEN);\n    stateFromLocal = {\n      id: null,\n      username: null,\n      full_name: null,\n      token: null,\n      role: null,\n      message: null\n    };\n  }\n\n  return stateFromLocal;\n}","map":{"version":3,"sources":["/Users/trantuan/LaundryShop/laundry-shop-admin/application/src/features/Auth/redux/reducer.js"],"names":["initialState","SET_TOKEN_ACTION","CLEAR_TOKEN_ACTION","ARG_TOKEN","reducer","state","action","defaultState","loadStateFromLocal","type","stateFromLocal","payload","JSON","parse","localStorage","getItem","id","username","full_name","token","role","message","e","removeItem"],"mappings":"AAAA,OAAOA,YAAP,MAAyB,gBAAzB;AACA,SACIC,gBADJ,EAEIC,kBAFJ,EAGIC,SAHJ,QAIO,aAJP;AAMA,OAAO,SAASC,OAAT,GAA+C;AAAA,MAA9BC,KAA8B,uEAAtBL,YAAsB;AAAA,MAARM,MAAQ;AAClD,QAAMC,YAAY,GAAGC,kBAAkB,EAAvC;;AACA,UAAQF,MAAM,CAACG,IAAf;AACI,SAAKR,gBAAL;AACA,SAAKC,kBAAL;AACA;AACI,aAAO,EACH,GAAGG,KADA;AAEH,WAAGE;AAFA,OAAP;AAJR;AASH;;AAED,SAASC,kBAAT,GAA8B;AAC1B,MAAIE,cAAJ;;AACA,MAAI;AACA,QAAIC,OAAO,GAAMC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBZ,SAArB,CAAX,CAAjB;AACAO,IAAAA,cAAc,GAAG;AACbM,MAAAA,EAAE,EAAEL,OAAO,CAACK,EADC;AAEbC,MAAAA,QAAQ,EAAEN,OAAO,CAACM,QAFL;AAGbC,MAAAA,SAAS,EAAEP,OAAO,CAACO,SAHN;AAIbC,MAAAA,KAAK,EAAER,OAAO,CAACQ,KAJF;AAKbC,MAAAA,IAAI,EAAET,OAAO,CAACS,IALD;AAMbC,MAAAA,OAAO,EAAE;AANI,KAAjB;AAQH,GAVD,CAUE,OAAOC,CAAP,EAAU;AACRR,IAAAA,YAAY,CAACS,UAAb,CAAwBpB,SAAxB;AACAO,IAAAA,cAAc,GAAG;AACbM,MAAAA,EAAE,EAAE,IADS;AAEbC,MAAAA,QAAQ,EAAE,IAFG;AAGbC,MAAAA,SAAS,EAAE,IAHE;AAIbC,MAAAA,KAAK,EAAE,IAJM;AAKbC,MAAAA,IAAI,EAAE,IALO;AAMbC,MAAAA,OAAO,EAAE;AANI,KAAjB;AAQH;;AACD,SAAOX,cAAP;AACH","sourcesContent":["import initialState from \"./initialState\";\nimport {\n    SET_TOKEN_ACTION,\n    CLEAR_TOKEN_ACTION,\n    ARG_TOKEN\n} from \"./constants\";\n\nexport function reducer(state = initialState, action) {\n    const defaultState = loadStateFromLocal();\n    switch (action.type) {\n        case SET_TOKEN_ACTION:\n        case CLEAR_TOKEN_ACTION:\n        default:\n            return {\n                ...state,\n                ...defaultState\n            };\n    }\n}\n\nfunction loadStateFromLocal() {\n    let stateFromLocal;\n    try {\n        let payload    = JSON.parse(localStorage.getItem(ARG_TOKEN));\n        stateFromLocal = {\n            id: payload.id,\n            username: payload.username,\n            full_name: payload.full_name,\n            token: payload.token,\n            role: payload.role,\n            message: null,\n        }\n    } catch (e) {\n        localStorage.removeItem(ARG_TOKEN)\n        stateFromLocal = {\n            id: null,\n            username: null,\n            full_name: null,\n            token: null,\n            role: null,\n            message: null,\n        }\n    }\n    return stateFromLocal;\n}"]},"metadata":{},"sourceType":"module"}